<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="utf-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">-->
    <meta name="description" content="">
    <meta name="author" content="">
    <title>corona stats</title>
    <!-- Bootstrap core CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@500&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300&display=swap" rel="stylesheet">
   <link href="https://fonts.googleapis.com/css2?family=Lexend+Giga&display=swap" rel="stylesheet">
  </head>
  <body>
  <style>
    body{
      background-color: black;
    }

  </style>
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <ul class="navbar-nav">
    <li class="nav-item ">
      <a class="nav-link" href="/">GLOBAL</a>
    </li>
    <li class="nav-item ">
      <a class="nav-link" href="/india">STATES</a>
    </li>
    <li class="nav-item active">
      <a class="nav-link" href="#">DISTRICTS</a>
    </li>
   <li class="nav-item ">
        <a class="nav-link" href="/graph">GRAPH</a>
      </li>
      <li class="nav-item ">
            <a class="nav-link" href="/map">MAP</a>
          </li>
  </ul>
</nav>

    <!-- Page Content -->
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-center main">
          <div>
            <h1 class="mt-2" style="color: grey;"> ▄︻デ=INDIA COVID-19═━一</h1>
            <p class="lead" style="color: white;">DISTRICTS</p>
          </div>
          
        </div>
      </div>
    </div>
    <br><br>
    <center class="lead" style="color:GREY;"><h5>SEARCH--BY-STATE</h6></center>
<br><center>
  <form >
  <div >
   
  <select    style="color: grey
  ;font-family: 'Roboto Slab'" name="drop-value" id="drop"  >
  <option value="default" >select</option>
</select>

<br><br><br><br><br><br>
<!-- table-->
<div>
<table class="table table-bordered table-dark">
  <thead>
    <tr>
      <th scope="col">STATE</th>
       <th  scope="col">CONFIRMED</th>
      
     
    </tr>
  </thead>

<tbody id="myTable">
 

</tbody>
</table>
</div>




<script> 
 // function job(){
   //var val=document.getElementById('drop').value ;       
       // console.log(val)
function fun(raw){
    var build=document.getElementById('myTable')
    var row=build.getElementsByTagName('tr')
  console.log(row.length)
 if(row.length>0){
   for(var i=row.length-1;i>-1;i--){
     build.deleteRow(i)
    }

 }

    
  for(var i=0;i<raw.length;i++){
   var row=`<tr><td style="font-family: 'Lexend Giga', sans-serif;">${raw[i].district}</td><td style="color:yellow;font-family: 'Rubik', sans-serif;"><center>${raw[i].confirmed}</center></td></tr>`
   build.innerHTML+=row
  }
}

let selection=document.querySelector('select');
selection.addEventListener('change',()=>{
  var tbl=document.getElementById('myTable')
  
  console.log(selection.options[selection.selectedIndex].value)
  var val=selection.options[selection.selectedIndex].value
  
 fetch('https://api.covid19india.org/v2/state_district_wise.json')
  .then((response)=> response.json())
  .then(function(data) {
    console.log(data[val].districtData)
    var raw=data[selection.options[selection.selectedIndex].value].districtData
 
    fun(raw);
    
    //  function fun(data[val].districtData){
    //var build=document.getElementById('myTable')

  //for(var i=0;i<data[val].districtData.length;i++){
   //var row=`<tr><td >${data[val].districtData[i].district}</td><td style="color:yellow">${data[val].districtData[i].confirmed}</td><td style="color:red">${data[val].districtData[i].lastupdatedtime}</td></tr>`
   //build.innerHTML+=row
  })
})
  
  
       </script>

<script>
  var select=document.getElementById('drop'),
  country=[ 'Kerala',
  'Delhi',
  'Telangana',
  'Rajasthan',
  'Haryana',
  'Uttar Pradesh',
  'Ladakh',
  'Tamil Nadu',
  'Jammu and Kashmir',
  'Karnataka',
  'Maharashtra',
  'Punjab',
  'Andhra Pradesh',
  'Uttarakhand',
  'Odisha',
  'Puducherry',
  'West Bengal',
  'Chandigarh',
  'Chhattisgarh',
  'Gujarat',
  'Himachal Pradesh',
  'Madhya Pradesh',
  'Bihar',
  'Manipur',
  'Mizoram',
  'Goa',
  'Andaman and Nicobar Islands',
  'Jharkhand',
  'Assam',
  'Arunachal Pradesh',
  'Dadra and Nagar Haveli',
  'Tripura' ]


 for(var i=0;i<32;i++){
            var option=document.createElement('option');
            txt=document.createTextNode(country[i]);
            option.appendChild(txt);
            option.setAttribute('value',i)
            select.insertBefore(option,select.lastChild);
           }

   

</script>

</body>
</html>